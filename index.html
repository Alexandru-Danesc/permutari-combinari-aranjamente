<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>PDF Book Viewer</title>

<!-- jQuery (REQUIRED) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

<!-- PDF.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.10.377/pdf.min.js"></script>

<!-- Turn.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/turn.js/4.1.0/turn.min.js"></script>

<style>
body {
    background: #dcdcdc;
    font-family: Arial;
    text-align: center;
}

#book {
    width: 1000px;
    height: 600px;
    margin: 40px auto;
}

.page {
    width: 500px;
    height: 600px;
    background: white;
}

canvas {
    width: 100%;
    height: 100%;
}
</style>
</head>

<body>

<h2>PDF Library</h2>

<button onclick="loadPDF('pdfs/book1.pdf')">Open Book 1</button>
<button onclick="loadPDF('pdfs/book2.pdf')">Open Book 2</button>
<div id="book"></div>

<script>

async function loadPDF(url) {

    const book = document.getElementById("book");
    book.innerHTML = "";

    const pdf = await pdfjsLib.getDocument(url).promise;

    for (let pageNum = 1; pageNum <= pdf.numPages; pageNum++) {

        const page = await pdf.getPage(pageNum);
        const viewport = page.getViewport({ scale: 1 });

        const canvas = document.createElement("canvas");
        const context = canvas.getContext("2d");

        canvas.width = 500;
        canvas.height = 600;

        const scaledViewport = page.getViewport({
            scale: 500 / viewport.width
        });

        await page.render({
            canvasContext: context,
            viewport: scaledViewport
        }).promise;

        const div = document.createElement("div");
        div.className = "page";
        div.appendChild(canvas);

        book.appendChild(div);
    }

    // IMPORTANT: destroy previous instance if exists
    if ($("#book").data("turn")) {
        $("#book").turn("destroy");
    }

    // Initialize as DOUBLE PAGE
    $("#book").turn({
        width: 1000,
        height: 600,
        autoCenter: true,
        display: "double",   // forces two-page spread
        gradients: true,
        elevation: 50
    });
}

</script>

</body>
</html>
